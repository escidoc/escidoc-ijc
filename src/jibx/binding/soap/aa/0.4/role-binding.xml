<binding>

	<!--  SOAP Binding -->

	<mapping name="role" class="de.escidoc.core.resources.aa.role.Role"
		ns="http://www.escidoc.de/schemas/role/0.4"
		post-set="ensureValidXLinkHrefDefinitions">
		
		<namespace uri="urn:oasis:names:tc:xacml:1.0:policy" prefix="xacml-policy" />
		<namespace uri="http://www.escidoc.de/schemas/role/0.4"
			prefix="role" />
		<!--
			***************************************** Root attributes
			******************************************
		-->
		<value name="objid" style="attribute" set-method="setObjid"
			get-method="getObjid" usage="optional" />

		<value name="last-modification-date" style="attribute" type="org.joda.time.DateTime"
			set-method="setLastModificationDate" get-method="getLastModificationDate"
			usage="optional" />


		<!--
			***************************************** Properties
			******************************************
		-->
		<structure ns="http://www.escidoc.de/schemas/role/0.4" name="properties"
			field="properties" usage="optional">
			<structure map-as="abstract-role-properties" usage="optional" />
		</structure>

		<!--
			***************************************** Scope
			******************************************
		-->
		<structure ns="http://www.escidoc.de/schemas/role/0.4" name="scope"
			field="scope" usage="optional">
			<structure map-as="abstract-role-scope" usage="optional" />
		</structure>

		<!--
			***************************************** Policy/PolicySet
			******************************************
		-->

		<structure field="policyOrPolicySet" type="org.w3c.dom.Element"
			marshaller="org.jibx.extras.DomElementMapper" unmarshaller="org.jibx.extras.DomElementMapper"
			usage="optional" />


	</mapping>

	<!-- start: binding of a single role -->
	<!--
		<mapping name="role" ns="http://www.escidoc.de/schemas/role/0.4"
		class="de.escidoc.core.resources.aa.role.Role"
		marshaller="de.escidoc.core.common.jibx.binding.RoleMarshaller"
		unmarshaller="de.escidoc.core.common.jibx.binding.RoleMarshaller">

		</mapping>
	-->
	<!-- end: binding of a single role -->

	<!-- start: binding of an role list -->

	<mapping ns="http://www.escidoc.de/schemas/rolelist/0.4" name="role-list"
		class="de.escidoc.core.resources.aa.role.Roles">
		<namespace uri="http://www.escidoc.de/schemas/rolelist/0.4"
			prefix="role-list" />
		<namespace uri="http://www.escidoc.de/schemas/role/0.4"
			prefix="role" />
		<collection field="roles" create-type="java.util.LinkedList">
			<structure ns="http://www.escidoc.de/schemas/role/0.4"
				type="de.escidoc.core.resources.aa.role.Role">
			</structure>
		</collection>
	</mapping>

	<!-- end: binding of an user role list -->

	<!--
		***************************************** Scope
		******************************************
	-->
	<mapping class="de.escidoc.core.resources.aa.role.Scope" ns="http://www.escidoc.de/schemas/role/0.4"
		abstract="true" type-name="abstract-role-scope">
		<namespace uri="http://www.escidoc.de/schemas/role/0.4"
			prefix="role" />

		<collection ns="http://www.escidoc.de/schemas/role/0.4"
			field="scopeDefinitions" create-type="java.util.LinkedList">
			<structure ns="http://www.escidoc.de/schemas/role/0.4"
				name="scope-def" type="de.escidoc.core.resources.aa.role.ScopeDef">
				<value name="resource-type" set-method="setResourceType"
					get-method="getResourceType" style="attribute" usage="optional" />
				<value name="relation-attribute-id" set-method="setRelationAttributeId"
					get-method="getRelationAttributeId" style="attribute" usage="optional" />
			</structure>
		</collection>
		<value name="unlimited" set-method="setUnlimited" get-method="isUnlimited"
			style="attribute" usage="optional" />

	</mapping>

	<!-- start: abstract binding of properties of a role -->
	<mapping ns="http://escidoc.de/core/01/properties/" class="de.escidoc.core.resources.aa.role.RoleProperties"
		abstract="true" type-name="abstract-role-properties">

		<namespace uri="http://escidoc.de/core/01/properties/"
			prefix="prop" />
		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />

		<value ns="http://escidoc.de/core/01/properties/" name="creation-date" type="org.joda.time.DateTime"
			set-method="setCreationDate" get-method="getCreationDate"
			usage="optional" />

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="created-by" field="createdBy" usage="optional">

			<value name="objid" style="attribute" set-method="setObjid"
				get-method="getObjid" usage="optional" />
		</structure>

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="modified-by" field="modifiedBy" usage="optional">

			<value name="objid" style="attribute" set-method="setObjid"
				get-method="getObjid" usage="optional" />
		</structure>

		<value ns="http://escidoc.de/core/01/properties/" name="name"
			field="name" usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" name="description"
			field="description" usage="optional" />

	</mapping>
	<!-- end: abstract binding of properties of a role -->

</binding>
