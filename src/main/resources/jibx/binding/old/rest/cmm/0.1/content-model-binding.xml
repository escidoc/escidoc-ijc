<?xml version="1.0" encoding="UTF-8"?>
<binding>

	<format type="java.net.URI"
               serializer="de.escidoc.core.common.jibx.CustomConverter.serializeURI"
               deserializer="de.escidoc.core.common.jibx.CustomConverter.deserializeURI"/>
<!--  
	<format type="java.net.URL"
               serializer="de.escidoc.core.common.jibx.CustomConverter.serializeURL"
               deserializer="de.escidoc.core.common.jibx.CustomConverter.deserializeURL"/>
 -->
 
	<!--  REST Binding -->

	<!-- start: binding of a single content model -->
	<mapping name="content-model" ns="http://www.escidoc.de/schemas/contentmodel/0.1"
		class="de.escidoc.core.resources.cmm.ContentModel">
		<namespace uri="http://www.escidoc.de/schemas/contentmodel/0.1"
			prefix="escidocContentModel" />
		<structure map-as="abstract-content-model" />
	</mapping>
	<!-- end: binding of a single content-model -->

	<!-- start: binding of an content-model list -->
<!--	<mapping ns="http://www.escidoc.de/schemas/itemlist/0.9"-->
<!--		name="item-list" class="de.escidoc.core.resources.om.item.ItemList">-->
<!--		<namespace uri="http://www.escidoc.de/schemas/itemlist/0.9"-->
<!--			prefix="il" />-->
<!--		<namespace uri="http://www.escidoc.de/schemas/item/0.9"-->
<!--			prefix="escidocItem" />-->
<!--		<collection field="items"-->
<!--			factory="de.escidoc.core.resources.om.item.ItemList.itemsFactory">-->
<!--			<structure name="item"-->
<!--				ns="http://www.escidoc.de/schemas/item/0.9"-->
<!--				type="de.escidoc.core.resources.om.item.Item">-->
<!--				<structure map-as="abstract-item" />-->
<!--			</structure>-->
<!--		</collection>-->
<!--	</mapping>-->
	<!-- end: binding of an content-model list -->

	<!-- start: abstract binding of a single content-model -->
	<mapping ns="http://www.escidoc.de/schemas/contentmodel/0.1"
		class="de.escidoc.core.resources.cmm.ContentModel" abstract="true"
		type-name="abstract-content-model"
		pre-get="genXLink">
		
		<namespace uri="http://www.escidoc.de/schemas/contentmodel/0.1"
			prefix="escidocContentModel" default="elements"/>
			
		<namespace uri="http://escidoc.de/core/01/properties/"
			prefix="prop" />
		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />
		<namespace uri="http://escidoc.de/core/01/properties/version/"
			prefix="version" />
		<namespace uri="http://escidoc.de/core/01/properties/release/"
			prefix="release" />
		<namespace
			uri="http://www.escidoc.de/schemas/contentstreams/0.7"
			prefix="contentStreams" />

		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<!-- *****************************************
			Root attributes 
			****************************************** -->
		<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
			set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
			set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
			set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

		<value name="last-modification-date" style="attribute" usage="optional"
			set-method="setLastModificationDate"
			get-method="getLastModificationDate"/>


		<!-- *****************************************
			Properties 
			****************************************** -->
		<structure name="properties" field="properties" usage="optional">
			<structure map-as="content-model-properties" usage="optional" />
		</structure>

		<!-- *****************************************
			Metadata Record Definitions 
			****************************************** -->
		<structure name="md-record-definitions" field="metadataRecordDefinitions"
			usage="optional">

			<collection create-type="de.escidoc.core.resources.cmm.MetadataRecordDefinitions"
        usage="optional">
				
				<structure map-as="abstract-md-record-definition"
					usage="optional" />
			</collection>
		</structure>

		<!-- ****************************************
			Resource Definitions
			****************************************** -->
		<structure name="resource-definitions" field="resourceDefinitions"
			usage="optional">

			<collection 
				create-type="de.escidoc.core.resources.cmm.ResourceDefinitions" usage="optional">
				
				<structure map-as="abstract-resource-definition"
					usage="optional" />
			</collection>
		</structure>

		<!-- Resources include (REST only) -->
 		<structure name="resources" usage="optional">
		</structure>

		<!-- ****************************************
			Content Streams
			****************************************** -->

	</mapping>
	<!-- end: abstract binding of a single content-model -->


	<!-- *****************************************
		 Metadata Record Definition binding definition
		****************************************** -->
	<mapping ns="http://www.escidoc.de/schemas/contentmodel/0.1"
		class="de.escidoc.core.resources.cmm.MetadataRecordDefinition"
		abstract="true" type-name="abstract-md-record-definition">

		<namespace uri="http://www.escidoc.de/schemas/contentmodel/0.1"
			prefix="escidocContentModel" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<structure ns="http://www.escidoc.de/schemas/contentmodel/0.1"
			name="md-record-definition"
			type="de.escidoc.core.resources.cmm.MetadataRecordDefinition" 
			usage="optional">

			<value name="name" style="attribute"
				set-method="setName" get-method="getName" usage="optional" />
				
			<structure name="schema" ns="http://www.escidoc.de/schemas/contentmodel/0.1" usage="optional" >
				<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
					set-method="setSchema" get-method="getSchema" usage="optional"  />
				<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
					set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
				<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
					set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
			</structure>
		</structure>
	</mapping>

	<!-- *****************************************
		 Resource Definitions binding definition
		****************************************** -->
	<mapping ns="http://www.escidoc.de/schemas/contentmodel/0.1"
		class="de.escidoc.core.resources.cmm.ResourceDefinition"
		abstract="true" type-name="abstract-resource-definition">

		<namespace uri="http://www.escidoc.de/schemas/contentmodel/0.1"
			prefix="escidocContentModel" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

			<structure
				ns="http://www.escidoc.de/schemas/contentmodel/0.1"
				name="resource-definition"
				type="de.escidoc.core.resources.cmm.ResourceDefinition" usage="optional">

				<value name="name" style="attribute"
					set-method="setName" get-method="getName" usage="optional" />
					
				<structure name="xslt" ns="http://www.escidoc.de/schemas/contentmodel/0.1" usage="optional" >
					<value ns="http://www.w3.org/1999/xlink" name="href" 
						set-method="setXslt" get-method="getXslt" style="attribute" 
						usage="optional" />
					<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
						set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
					<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
						set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
				</structure>

				<value name="md-record-name" ns="http://www.escidoc.de/schemas/contentmodel/0.1"
					set-method="setMetadataRecordName" get-method="getMetadataRecordName" usage="optional" />
			</structure>
	</mapping>

	<!-- *****************************************
		Properties binding definition
		****************************************** -->
	<mapping ns="http://escidoc.de/core/01/properties/"
		class="de.escidoc.core.resources.cmm.ContentModelProperties"
		abstract="true" type-name="content-model-properties">

		<namespace uri="http://escidoc.de/core/01/properties/"
			prefix="prop" default="elements"/>
			
		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />
		<namespace uri="http://escidoc.de/core/01/properties/version/"
			prefix="version" />
		<namespace uri="http://escidoc.de/core/01/properties/release/"
			prefix="release" />

		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<value ns="http://escidoc.de/core/01/properties/" 
		  name="name" usage="optional"
			set-method="setName" get-method="getName"/>

		<value name="description" usage="optional"
			set-method="setDescription" get-method="getDescription"/>

		<value name="creation-date" usage="optional"
			set-method="setCreationDate" get-method="getCreationDate"/>

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="created-by" usage="optional"
			set-method="setCreatedBy" get-method="getCreatedBy">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
		</structure>

		<value name="public-status" usage="optional"
			set-method="setPublicStatus" get-method="getPublicStatus"
			enum-value-method="getXmlValue"/>

		<value name="public-status-comment" usage="optional"
			set-method="setPublicStatusComment" get-method="getPublicStatusComment"/>

		<!-- lock (status, date, owner) -->
    <value name="lock-status" field="lockStatus" usage="optional"
      enum-value-method="getXmlValue"/>
    <value name="lock-date" usage="optional"
      set-method="setLockDate" get-method="getLockDate"/>
        
    <structure ns="http://escidoc.de/core/01/structural-relations/"
      name="lock-owner" field="lockOwner" usage="optional">
      
      <value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
        set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
      <value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
        set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
      <value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
        set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
    </structure>

		<value name="pid" usage="optional"
			set-method="setPid" get-method="getPid"/>

		<!-- *****************************************
			Version 
			****************************************** -->
		<structure name="version" field="version" usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

			<value ns="http://escidoc.de/core/01/properties/version/"
				name="number" get-method="getNumber" set-method="setNumber"
				usage="optional" />

			<value ns="http://escidoc.de/core/01/properties/version/" type="org.joda.time.DateTime"
				name="date" set-method="setDate"
				get-method="getDate" usage="optional" />
			<value ns="http://escidoc.de/core/01/properties/version/"
				name="status" set-method="setStatus" get-method="getStatus"
				usage="optional" />

			<structure
				ns="http://escidoc.de/core/01/structural-relations/"
				name="modified-by" set-method="setModifiedBy"
				get-method="getModifiedBy" usage="optional">

				<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
					set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
				<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
					set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
				<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
					set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
			</structure>

			<value ns="http://escidoc.de/core/01/properties/version/"
				name="comment" set-method="setComment" get-method="getComment"
				usage="optional" />

			<value ns="http://escidoc.de/core/01/properties/version/"
				name="pid" set-method="setPid" get-method="getPid" usage="optional" />
		</structure>

		<!-- *****************************************
			Latest-Version 
			****************************************** -->
		<structure name="latest-version" field="latestVersion" usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

			<value ns="http://escidoc.de/core/01/properties/version/"
				name="number" get-method="getNumber" set-method="setNumber"
				usage="optional" />
			<value ns="http://escidoc.de/core/01/properties/version/" type="org.joda.time.DateTime"
				name="date" set-method="setDate"
				get-method="getDate" usage="optional" />
			<value ns="http://escidoc.de/core/01/properties/release/"
				name="pid" set-method="setPid" get-method="getPid" usage="optional" />
		</structure>

		<!-- *****************************************
			Latest-Release 
			****************************************** -->
		<structure name="latest-release" field="latestRelease" usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

			<value ns="http://escidoc.de/core/01/properties/release/"
				name="number" get-method="getNumber" set-method="setNumber"
				usage="optional" />
			<value ns="http://escidoc.de/core/01/properties/release/" type="org.joda.time.DateTime"
				name="date" set-method="setDate"
				get-method="getDate" usage="optional" />
			<value ns="http://escidoc.de/core/01/properties/release/"
				name="pid" set-method="setPid" get-method="getPid" usage="optional" />
		</structure>
	</mapping>

</binding>