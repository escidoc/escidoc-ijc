<binding>

  <namespace uri="http://www.escidoc.de/schemas/aggregationdefinition/0.4"
    default="elements"/>
  <namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

  <mapping name="aggregation-definition" 
    class="de.escidoc.core.resources.sm.ad.AggregationDefinition"
    ns="http://www.escidoc.de/schemas/aggregationdefinition/0.4"
    pre-get="genXLink">
    
    <value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
      set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
    <value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
      set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
    <value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
      set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
      
    <structure name="name">
      <value style="text" field="name"/>
    </structure>
    
    <structure name="scope" field="scope"
      type="de.escidoc.core.resources.common.reference.ScopeRef">
      
      <value ns="http://www.w3.org/1999/xlink" name="href" style="attribute" 
	      set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
	    <value ns="http://www.w3.org/1999/xlink" name="title" style="attribute" 
	      set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
	    <value ns="http://www.w3.org/1999/xlink" name="type" style="attribute" 
	      set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
    </structure>
    
    <collection field="aggregationTables" create-type="java.util.LinkedList"
      item-type="de.escidoc.core.resources.sm.ad.AggregationTable">
	    <structure name="aggregation-table">
	      <structure name="name">
	        <value style="text" field="name"/>
	      </structure>
	      
	      <collection field="fields" create-type="java.util.LinkedList"
          item-type="de.escidoc.core.resources.sm.ad.Field" usage="required">
		      <structure name="field" 
		        marshaller="de.escidoc.core.common.jibx.binding.FieldMarshaller" 
            unmarshaller="de.escidoc.core.common.jibx.binding.FieldMarshaller">
          </structure>
	      </collection>
	      
	      <collection field="indexes" create-type="java.util.LinkedList" 
          item-type="de.escidoc.core.resources.sm.ad.Index">
	        <structure name="index">
            <structure name="name">
              <value style="text" field="name"/>
            </structure>
						<collection field="fieldNames" create-type="java.util.LinkedList" 
						  item-type="java.lang.String">
						  <structure name="field">
						    <value style="text"/>
						  </structure>
						</collection>
	        </structure>
        </collection>
	    </structure>
	  </collection>
    
    <structure name="statistic-data" field="statisticData"
      type="de.escidoc.core.resources.sm.ad.StatisticData">
      <structure name="statistic-table" field="statisticTable"
        type="de.escidoc.core.resources.sm.ad.StatisticTable">
        <structure name="xpath">
          <value style="text" field="xPath" usage="optional"/>
        </structure>
      </structure>
    </structure>
  </mapping>
</binding>