<?xml version="1.0" encoding="UTF-8"?>
<binding>
	<!-- REST Binding -->
	<!-- start: binding of a single context -->
	<mapping name="context" ns="http://www.escidoc.de/schemas/context/0.7"
		class="de.escidoc.core.resources.om.context.Context">
		<namespace uri="http://www.escidoc.de/schemas/context/0.7"
			prefix="escidocContext" />
		<structure map-as="abstract-context" />
	</mapping>
	<!-- end: binding of a single context -->

	<!-- start: abstract binding of a single context -->
	<mapping ns="http://www.escidoc.de/schemas/context/0.7" class="de.escidoc.core.resources.om.context.Context"
		abstract="true" type-name="abstract-context" pre-get="genXLink">

		<namespace uri="http://www.escidoc.de/schemas/context/0.7"
			prefix="escidocContext" />
		<namespace uri="http://escidoc.de/core/01/properties/"
			prefix="prop" />
		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<!-- Root attributes -->
		<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
			set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
			set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
			set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

		<value name="last-modification-date" style="attribute"
			type="org.joda.time.DateTime" set-method="setLastModificationDate"
			get-method="getLastModificationDate" usage="optional" />

		<!-- Properties include -->
		<structure ns="http://www.escidoc.de/schemas/context/0.7"
			name="properties" field="properties" usage="optional">
			<structure map-as="context-properties" usage="optional" />
		</structure>

		<!-- Resources include (REST only) -->
		<structure ns="http://www.escidoc.de/schemas/context/0.7"
			name="resources" usage="optional">
		</structure>

		<!-- AdminDescriptors include -->
		<structure ns="http://www.escidoc.de/schemas/context/0.7"
			name="admin-descriptors" field="adminDescriptors" usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

			<collection create-type="de.escidoc.core.resources.om.context.AdminDescriptors"
				usage="optional">

				<structure map-as="abstract-admin-descriptor" usage="optional" />
			</collection>
		</structure>
	</mapping>
	<!-- end: abstract binding of a single context -->


	<!-- ***************************************** Properties binding definition 
		****************************************** -->
	<mapping ns="http://escidoc.de/core/01/properties/" class="de.escidoc.core.resources.om.context.Properties"
		abstract="true" type-name="context-properties">

		<namespace uri="http://escidoc.de/core/01/properties/"
			prefix="prop" />
		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
			set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
			set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
		<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
			set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" type="org.joda.time.DateTime"
			name="creation-date" set-method="setCreationDate" get-method="getCreationDate"
			usage="optional" />

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="created-by" field="createdBy" usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
		</structure>

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="modified-by" set-method="setModifiedBy" get-method="getModifiedBy"
			usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
		</structure>

		<value ns="http://escidoc.de/core/01/properties/" name="public-status"
			set-method="setPublicStatus" get-method="getPublicStatus" usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" name="public-status-comment"
			set-method="setPublicStatusComment" get-method="getPublicStatusComment"
			usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" name="name"
			set-method="setName" get-method="getName" usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" name="description"
			set-method="setDescription" get-method="getDescription" usage="optional" />

		<value ns="http://escidoc.de/core/01/properties/" name="type"
			set-method="setType" get-method="getType" usage="optional" />


		<structure ns="http://escidoc.de/core/01/properties/" name="organizational-units"
			field="organizationalUnitRefs" usage="optional">

			<collection
				create-type="de.escidoc.core.resources.om.context.OrganizationalUnitRefs"
				usage="optional">

				<structure map-as="abstract-organizational-unit-ref"
					usage="optional" />
			</collection>

		</structure>

	</mapping>

	<!-- ***************************************** 
	     Abstract Organizational Unit References 
	     ****************************************** -->
	<mapping ns="http://escidoc.de/core/01/properties/"
		class="de.escidoc.core.resources.common.reference.OrganizationalUnitRef"
		abstract="true" type-name="abstract-organizational-unit-ref">

		<namespace uri="http://escidoc.de/core/01/structural-relations/"
			prefix="srel" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<structure ns="http://escidoc.de/core/01/structural-relations/"
			name="organizational-unit"
			type="de.escidoc.core.resources.common.reference.OrganizationalUnitRef"
			usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />
		</structure>
	</mapping>

	<!-- ***************************************** Abstract Admin Descriptors 
		****************************************** -->
	<mapping ns="http://www.escidoc.de/schemas/context/0.7"
		class="de.escidoc.core.resources.om.context.AdminDescriptor" abstract="true"
		type-name="abstract-admin-descriptor">

		<namespace uri="http://www.escidoc.de/schemas/context/0.7"
			prefix="escidocContext" />
		<namespace uri="http://www.w3.org/1999/xlink" prefix="xlink" />

		<structure ns="http://www.escidoc.de/schemas/context/0.7"
			name="admin-descriptor" type="de.escidoc.core.resources.om.context.AdminDescriptor"
			usage="optional">

			<value ns="http://www.w3.org/1999/xlink" name="href" style="attribute"
				set-method="setXLinkHref" get-method="getXLinkHref" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="title" style="attribute"
				set-method="setXLinkTitle" get-method="getXLinkTitle" usage="optional" />
			<value ns="http://www.w3.org/1999/xlink" name="type" style="attribute"
				set-method="setXLinkType" get-method="getXLinkType" usage="optional" />

			<value name="name" set-method="setName" get-method="getName"
				style="attribute" usage="optional" />

			<structure field="content" type="org.w3c.dom.Element"
				marshaller="org.jibx.extras.DomElementMapper" 
				unmarshaller="org.jibx.extras.DomElementMapper"
				usage="optional" />
		</structure>
	</mapping>

	<!-- start: binding of a context unit list -->
	<mapping ns="http://www.escidoc.de/schemas/contextlist/0.7" 
    name="context-list" class="de.escidoc.core.resources.om.context.ContextList">
    
    <namespace uri="http://www.escidoc.de/schemas/contextlist/0.7"
      prefix="context-list" />
    <namespace uri="http://www.escidoc.de/schemas/context/0.7"
      prefix="context" default="elements"/>
      
    <collection create-type="java.util.LinkedList" usage="optional"
      item-type="de.escidoc.core.resources.om.context.Context">
      <structure name="context">
        <structure map-as="abstract-context" />
      </structure>
    </collection>
  </mapping>
	<!-- end: binding of a context list -->

</binding>

